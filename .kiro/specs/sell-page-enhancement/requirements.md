# Требования к доработке страницы продажи скинов

## Введение

Необходимо доработать страницу продажи скинов (/sell), добавив функциональность для ввода ссылки на обмен Steam, фильтрации и поиска скинов, а также блок оплаты. Страница должна обеспечивать удобный интерфейс для продажи скинов с интеграцией различных способов оплаты.

## Требования

### Требование 1

**Пользовательская история:** Как пользователь, я хочу видеть навигационные элементы на странице продажи, чтобы понимать где я нахожусь и иметь возможность навигации.

#### Критерии приемки

1. КОГДА пользователь заходит на страницу /sell, ТО система ДОЛЖНА отображать хлебные крошки с путем "Главная > Продать скины"
2. КОГДА пользователь заходит на страницу /sell, ТО система ДОЛЖНА отображать заголовок страницы "Продать скины"
3. КОГДА пользователь кликает на элемент хлебных крошек, ТО система ДОЛЖНА перенаправить на соответствующую страницу

### Требование 2

**Пользовательская история:** Как пользователь, я хочу ввести ссылку на обмен Steam, чтобы система могла получить доступ к моему инвентарю и загрузить мои скины.

#### Критерии приемки

1. КОГДА пользователь видит форму ввода ссылки, ТО система ДОЛЖНА отображать текст "Вставьте свою ссылку на обмен:" с выделенным словом "ссылку" зеленым цветом
2. КОГДА пользователь вводит ссылку, ТО система ДОЛЖНА валидировать что ссылка начинается с "https://steamcommunity.com/"
3. ЕСЛИ ссылка не содержит "https://", ТО система ДОЛЖНА автоматически добавить "https://" в начало
4. ЕСЛИ ссылка не соответствует формату Steam Community, ТО система ДОЛЖНА показать ошибку валидации
5. КОГДА пользователь вводит корректную ссылку, ТО система ДОЛЖНА принять ввод без ошибок
6. КОГДА пользователь вводит корректную ссылку, ТО система ДОЛЖНА использовать debounce (500мс) перед отправкой запроса
7. КОГДА пользователь вводит корректную ссылку с debounce, ТО система ДОЛЖНА отправить запрос на получение инвентаря по trade URL
8. КОГДА система получает инвентарь, ТО система ДОЛЖНА отобразить реальные скины пользователя вместо мок данных

### Требование 3

**Пользовательская история:** Как пользователь, я хочу фильтровать и искать скины, чтобы быстро найти нужные предметы для продажи.

#### Критерии приемки

1. КОГДА пользователь видит панель фильтров, ТО система ДОЛЖНА отображать выпадающий список игр (CS:GO, Rust, Dota 2)
2. КОГДА пользователь видит панель фильтров, ТО система ДОЛЖНА отображать поле поиска по скинам с иконкой поиска
3. КОГДА пользователь видит панель фильтров, ТО система ДОЛЖНА отображать кнопку сортировки по цене с выпадающим списком
4. КОГДА пользователь видит панель фильтров, ТО система ДОЛЖНА отображать чекбокс "Выбрать все"
5. КОГДА пользователь видит панель фильтров, ТО система ДОЛЖНА отображать кнопку обновления с иконкой
6. КОГДА пользователь кликает на выпадающий список игр, ТО система ДОЛЖНА показать/скрыть список опций с анимацией поворота стрелки
7. КОГДА пользователь кликает на сортировку, ТО система ДОЛЖНА показать опции "Дешевле" и "Дороже"

### Требование 4

**Пользовательская история:** Как пользователь, я хочу видеть свои скины в виде карточек, чтобы выбрать какие продать.

#### Критерии приемки

1. КОГДА система загружает скины, ТО система ДОЛЖНА отображать их в виде сетки карточек
2. КОГДА пользователь видит карточки скинов, ТО каждая карточка ДОЛЖНА содержать изображение, название, цену и статус
3. КОГДА пользователь кликает на карточку скина, ТО система ДОЛЖНА выделить/снять выделение с карточки
4. КОГДА пользователь выбирает скины, ТО система ДОЛЖНА обновлять общую сумму в блоке оплаты

### Требование 5

**Пользовательская история:** Как пользователь, я хочу видеть блок оплаты с выбранными скинами, чтобы завершить продажу.

#### Критерии приемки

1. КОГДА пользователь выбирает скины, ТО система ДОЛЖНА отображать блок оплаты справа от списка скинов
2. КОГДА пользователь видит блок оплаты, ТО система ДОЛЖНА показывать количество выбранных предметов и общую сумму
3. КОГДА пользователь видит блок оплаты, ТО система ДОЛЖНА отображать селектор валюты (рубли по умолчанию)
4. КОГДА пользователь видит блок оплаты, ТО система ДОЛЖНА показывать все доступные способы оплаты в виде карточек
5. КОГДА пользователь выбирает способ оплаты, ТО система ДОЛЖНА выделить выбранную карточку
6. КОГДА пользователь видит блок оплаты, ТО система ДОЛЖНА отображать информацию о Steam Trade Protection
7. КОГДА пользователь видит блок оплаты, ТО система ДОЛЖНА показывать кнопку "ПРОДОЛЖИТЬ" с итоговой суммой

### Требование 7

**Пользовательская история:** Как пользователь, я хочу заполнить данные для выплаты после выбора способа оплаты, чтобы получить деньги за скины.

#### Критерии приемки

1. КОГДА пользователь нажимает кнопку "ПРОДОЛЖИТЬ", ТО система ДОЛЖНА переключить PaymentSidebar в режим ввода данных для выплаты
2. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА сохранить верхнюю часть с информацией о выбранных скинах и сумме
3. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА отображать кнопку "< Вернуться к способам оплаты" для возврата к предыдущему состоянию
4. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА показывать выбранный способ оплаты крупно с зеленой галочкой
5. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА отображать объединенный селектор страны и банка в одном ряду
6. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА показывать поле ввода номера карты с плейсхолдером "Введите номер карты"
7. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА показывать поле ввода Telegram с плейсхолдером "@username"
8. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА показывать необязательное поле Email с плейсхолдером "E-mail (Необязательно)"
9. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА отображать информацию "К выплате:" с суммой
10. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА показывать предупреждение о согласии с политикой конфиденциальности
11. КОГДА пользователь видит форму выплаты, ТО система ДОЛЖНА отображать кнопку "ПОЛУЧИТЬ ДЕНЬГИ" в неактивном состоянии пока не заполнены обязательные поля
12. КОГДА пользователь заполняет все обязательные поля, ТО система ДОЛЖНА активировать кнопку "ПОЛУЧИТЬ ДЕНЬГИ"

### Требование 8

**Пользовательская история:** Как пользователь, я хочу видеть предупреждение о мошенничестве перед завершением операции, чтобы быть уверенным в безопасности.

#### Критерии приемки

1. КОГДА пользователь нажимает активную кнопку "ПОЛУЧИТЬ ДЕНЬГИ", ТО система ДОЛЖНА показать модальное окно с предупреждением о мошенничестве
2. КОГДА пользователь видит модальное окно, ТО система ДОЛЖНА отображать информацию о безопасности и защите от мошенников
3. КОГДА пользователь видит модальное окно, ТО система ДОЛЖНА показывать два чекбокса для подтверждения прочтения информации
4. КОГДА пользователь видит модальное окно, ТО система ДОЛЖНА отображать кнопку "ПРОДОЛЖИТЬ" в неактивном состоянии
5. КОГДА пользователь отмечает оба чекбокса, ТО система ДОЛЖНА активировать кнопку "ПРОДОЛЖИТЬ" в модальном окне
6. КОГДА пользователь нажимает активную кнопку "ПРОДОЛЖИТЬ" в модальном окне, ТО система ДОЛЖНА закрыть окно и завершить операцию

### Требование 9

**Пользовательская история:** Как система, я должна предоставлять API для получения инвентаря пользователя по trade URL и Steam ID, чтобы отображать реальные скины для продажи.

#### Критерии приемки

1. КОГДА система получает запрос на /api/users/inventory/by-trade-url, ТО система ДОЛЖНА принимать trade URL и возвращать инвентарь без цен
2. КОГДА система получает запрос на /api/users/{steamId}/inventory, ТО система ДОЛЖНА принимать Steam ID и Game ID и возвращать инвентарь без цен
3. КОГДА система получает запрос на /api/users/inventory/by-trade-url/with-prices, ТО система ДОЛЖНА принимать trade URL и возвращать инвентарь с ценами
4. КОГДА система получает запрос на /api/users/{steamId}/inventory/with-prices, ТО система ДОЛЖНА принимать Steam ID и Game ID и возвращать инвентарь с ценами
5. КОГДА система обрабатывает запросы с Game ID, ТО система ДОЛЖНА поддерживать следующие игры: 730 (CS2), 570 (Dota 2), 753 (Steam), 252490 (Rust)
6. КОГДА система возвращает инвентарь, ТО ответ ДОЛЖЕН содержать: steamId, tradeUrl, gameId, contextId, items[], count, lastUpdated, totalValue (для запросов с ценами)
7. КОГДА система возвращает предметы, ТО каждый предмет ДОЛЖЕН содержать: assetId, classId, instanceId, market_name, market_hash_name, name, type, rarity, exterior, image, tradable, marketable, prices (для запросов с ценами), amount

### Требование 10

**Пользовательская история:** Как пользователь, я хочу видеть динамически рассчитанные сроки выплаты на основе текущей даты, чтобы понимать когда получу деньги.

#### Критерии приемки

1. КОГДА система отображает информацию о Steam Trade Protection, ТО система ДОЛЖНА рассчитывать дату выплаты как текущая дата + 8 дней
2. КОГДА система рассчитывает дату выплаты, ТО система ДОЛЖНА использовать библиотеку dayjs для работы с датами
3. КОГДА система отображает дату выплаты, ТО система ДОЛЖНА показывать дату в формате "после DD.MM.YYYY HH:mm"
4. КОГДА пользователь видит информацию о выплате, ТО система ДОЛЖНА отображать актуальную дату выплаты при каждом рендере страницы

### Требование 6

**Пользовательская история:** Как пользователь, я хочу видеть информационный текст о сервисе, чтобы понимать преимущества продажи скинов через платформу.

#### Критерии приемки

1. КОГДА пользователь прокручивает страницу вниз, ТО система ДОЛЖНА отображать информационный блок о сервисе
2. КОГДА пользователь видит информационный текст, ТО система ДОЛЖНА отображать полное описание преимуществ сервиса INSKINS
3. КОГДА пользователь читает текст, ТО система ДОЛЖНА использовать белый цвет текста и стандартный шрифт SF Pro Text
