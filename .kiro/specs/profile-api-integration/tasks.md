# План задач интеграции API в компоненты профиля

- [x] 1. Исправить хук useProfile для правильного получения данных профиля

  - Обновить `src/hooks/useProfile.ts` для использования `/api/users/{steamId}` вместо несуществующего `/api/users/me`
  - Получать steamId из `getMe()` из `src/api/auth/model.ts` (эндпоинт `/api/auth/me`)
  - Использовать полученный steamId для запроса к `/api/users/{steamId}`
  - Реализовать загрузку, кеширование и обработку ошибок
  - ИГНОРИРОВАТЬ типы из `src/types` - использовать только типы из `src/api/users/types.ts`
  - _Требования: 2.1, 2.2, 2.3, 2.4_

- [x] 2. Обновить хук useOrders для использования в качестве источника транзакций

  - Обновить `src/hooks/useOrders.ts` для использования `getMyOrders()` из `src/api/orders/model.ts`
  - Добавить передачу steamId из useAuth в параметры запроса
  - Реализовать поиск по названию предмета (`itemName`) и номеру заказа (`orderNumber`)
  - Добавить маппинг заказов в формат транзакций для отображения в профиле
  - ИГНОРИРОВАТЬ типы из `src/types` - использовать только типы из `src/api/orders/types.ts`
  - _Требования: 3.1, 3.2, 3.3_

- [ ] 3. Удалить хук useTransactions (больше не используется)

  - Удалить файл `src/hooks/useTransactions.ts` так как теперь используем только orders
  - Обновить все импорты в компонентах для использования useOrders вместо useTransactions
  - Убрать все ссылки на транзакции API из `src/api/users/model.ts`
  - _Требования: 3.1, 3.2, 3.3_

- [ ] 4. Обновить типы компонентов под API данные

  - ПОЛНОСТЬЮ ИГНОРИРОВАТЬ типы из `src/types` и типы в компонентах
  - Заменить ВСЕ типы компонентов на типы из API
  - Использовать `IUserMeData` из `src/api/users/types.ts` для профиля
  - Использовать `IUserTransaction` из `src/api/users/types.ts` для транзакций
  - Использовать `IOrder` из `src/api/orders/types.ts` для заказов
  - Убрать ненужные маппинги и промежуточные типы
  - _Требования: 1.1, 3.1, 4.1_

- [ ] 5. Исправить компонент Header для корректного отображения данных профиля

  - Исправить интеграцию useProfile хука в `src/components/Header/Header.tsx`
  - Убедиться что useProfile правильно получает данные из `/api/users/{steamId}` используя steamId из `/api/auth/me`
  - Заменить моковые данные пользователя на реальные из API
  - Обновить отображение баланса, аватара и имени пользователя из правильных полей ответа
  - Использовать `steamAvatar`, `displayName` или `steamNickname`, `balance`, `currency` из ответа
  - Добавить обработку состояний загрузки и ошибок
  - ИГНОРИРОВАТЬ существующие типы в Header - использовать только `IUserMeData` из `src/api/users/types.ts`
  - _Требования: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 6. Исправить страницу профиля для корректного использования данных

  - Обновить интеграцию useProfile хука в `src/app/profile/page.tsx`
  - Убедиться что данные получаются из правильного эндпоинта `/api/users/{steamId}`
  - Заменить моковые данные пользователя на реальные из исправленного useProfile
  - Обновить компонент ProfileInfoBlock для работы с реальной структурой данных
  - Использовать правильные поля из ответа API: `steamNickname`, `displayName`, `steamAvatar`, `balance`, `currency`
  - Добавить обработку ошибок и состояний загрузки
  - ИГНОРИРОВАТЬ типы `IUser` - использовать только `IUserMeData` из `src/api/users/types.ts`
  - _Требования: 2.1, 2.2, 2.3, 2.4, 2.5_

  - - [ ] 8. Обновить компоненты транзакций для работы с заказами

- [ ] 7. Интегрировать заказы как транзакции в TransactionsTab

  - Обновить `src/components/Profile/TransactionsTab/TransactionsTab.tsx`
  - Заменить моковые данные на useOrders хук
  - Наделить функционалом поля поиска по названию предмета и номеру заказа над таблицей
  - ИГНОРИРОВАТЬ типы из `src/types/transaction.ts` - использовать только `IOrder` из `src/api/orders/types.ts`
  - Обновить компоненты для работы с реальной структурой данных заказов
  - _Требования: 3.1, 3.2, 3.3, 3.5_

- [ ] 8. Обновить компоненты транзакций для работы с заказами

  - Обновить `src/components/Profile/TransactionRow/TransactionRow.tsx` для отображения данных заказов
  - Обновить `src/components/Profile/TransactionDetails/TransactionDetails.tsx` для деталей заказов
  - Добавить отображение списка предметов из `itemNames`
  - Добавить отображение номера заказа и статуса
  - ИГНОРИРОВАТЬ все существующие типы - использовать только `IOrder` из `src/api/orders/types.ts`
  - _Требования: 4.1, 4.2, 4.3, 4.5_

- [ ] 9. Добавить обработку ошибок и индикаторы загрузки

  - Создать утилиты обработки ошибок в `src/utils/errorHandlers.ts`
  - Добавить единообразные индикаторы загрузки во все компоненты
  - Реализовать показ ошибок пользователю
  - Добавить возможность повторной загрузки данных при ошибках
  - _Требования: 5.1, 5.2, 5.3, 5.4, 5.5_

- [ ] 10. Оптимизировать производительность и кеширование

  - Добавить мемоизацию в хуки для предотвращения лишних рендеров
  - Реализовать кеширование данных профиля и транзакций
  - Добавить дебаунсинг для поиска и фильтрации
  - Оптимизировать запросы к API
  - _Требования: 5.3, 5.4_

- [ ] 11. пофиксить ранее совершенные недочеты

      Так пометить в аутх юзер что он только для авторизации, а для получения данных профиля мы юзаем другой запрос и его пометить в апи юзера

  - новая типизация методов оплаты
    export enum EPaymentMethod {
    CARD = 'card',
    SBP = 'sbp',
    USDT_TRC20 = 'usdt_trc20',
    BNB = 'bnb',
    USDC_TRC20 = 'usdc_trc20',
    BTC = 'btc',
    ETH = 'eth',
    SOLANA = 'solana',
    TON = 'ton',
    USDT_ERC20 = 'usdt_erc20',
    INSKINS = 'inskins',
    }

Добавить ее в C:\Users\AIAvenger\Desktop\inskins-web\src\api\users\types.ts вместо тпеймент метод, заменить использование в TransactionRow и Payment card на актуальные типы

- _Требования: 2.1, 2.2, 2.3, 2.4, 2.5_

  - Так пометить в аутх юзер что он только для авторизации, а для получения данных профиля мы юзаем другой запрос и его пометить в апи юзера
  - новая типизация методов оплаты
    export enum EPaymentMethod {
    CARD = 'card',
    SBP = 'sbp',
    USDT_TRC20 = 'usdt_trc20',
    BNB = 'bnb',
    USDC_TRC20 = 'usdc_trc20',
    BTC = 'btc',
    ETH = 'eth',
    SOLANA = 'solana',
    TON = 'ton',
    USDT_ERC20 = 'usdt_erc20',
    INSKINS = 'inskins',
    }

Добавить ее в C:\Users\AIAvenger\Desktop\inskins-web\src\api\users\types.ts вместо тпеймент метод, заменить использование в TransactionRow и Payment card на актуальные типы

- _Требования: 2.1, 2.2, 2.3, 2.4, 2.5_
